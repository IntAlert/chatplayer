webpackJsonp([4],{"./app/containers/HomePage/constants.js":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return s}),n.d(e,"f",function(){return u}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return c}),n.d(e,"i",function(){return a}),n.d(e,"g",function(){return p}),n.d(e,"h",function(){return f});var r="app/Home/SCRIPT_FETCH_REQUESTED",o="app/Home/SCRIPT_FETCH_SUCCEEDED",s="app/Home/SCRIPT_FETCH_FAILED",u="borderbot/Home/RESPOND",i="app/Home/TIMER_START",c="app/Home/TIMER_TICK",a="app/Home/BOT_MESSAGE_INVISIBLE",p="app/Home/BOT_MESSAGE_WRITING",f="app/Home/BOT_MESSAGE_VISIBLE"},"./app/containers/HomePage/reducer.js":function(t,e,n){"use strict";function r(){var t,t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,n=arguments[1],r=function(){switch(n.type){case i.d:return t=e.merge({script_loaded:!0,script:n.script,current_stage_id:n.script.initial_stage_id}),t=s(t,n.script.initial_stage_id),{v:t};case i.e:return console.log("script fetch failed"),{v:e};case i.f:var r=e.getIn(["script","stages",n.stage_id,"choices",n.choice_id]),u=r.getIn(["next_stage_id"]);return t=e.set("current_stage_id",u).set("show_user_choices",!1).update("feed",function(t){return t.push({type:0,content:{text:r.get("text")}})}),t=o(t,r),t=s(t,u),{v:t};case i.c:var c=e.get("feed").findIndex(function(t){return(t.type==-1||1==t.type)&&t.status==i.g});if(c>-1)return{v:e.updateIn(["feed",c],function(t){var e=Object.assign({},t);return e.status=i.h,e})};var a=e.get("feed").findIndex(function(t){return(t.type==-1||1==t.type)&&t.status==i.i});return a>-1?{v:e.updateIn(["feed",a],function(t){var e=Object.assign({},t);return e.status=i.g,e})}:0==e.get("show_user_choices")&&e.get("current_stage_id")!==!1?{v:e.set("show_user_choices",!0)}:{v:e};default:return{v:e}}}();if("object"===("undefined"==typeof r?"undefined":c(r)))return r.v}function o(t,e){var n=e.getIn(["responses"]);if(void 0==n)return console.log("// no immediate responses"),t;var r=t.update("feed",function(t){var e=t;return n.toArray().forEach(function(t){var n={type:1,status:i.i,content:{text:t.get("content")}};e=e.push(n)}),e});return r}function s(t,e){var n=t.getIn(["script","stages",e,"prompts"]),r=t.update("feed",function(t){var e=t;return n.toArray().forEach(function(t){var n={type:-1,status:i.i,content:{text:t.get("content")}};e=e.push(n)}),e});return r}Object.defineProperty(e,"__esModule",{value:!0});var u=n("./node_modules/immutable/dist/immutable.js"),i=(n.n(u),n("./app/containers/HomePage/constants.js")),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n.i(u.fromJS)({script_loaded:!1,current_stage_id:!1,show_user_choices:!1,script:{},feed:[]});e.default=r}});